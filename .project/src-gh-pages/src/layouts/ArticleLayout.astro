---
import Layout from './Layout.astro';
const { frontmatter } = Astro.props;
---
<Layout title={frontmatter.title}>
  <article class="content">
    <h1>{frontmatter.title}</h1>
    <p class="meta" data-publish-date={frontmatter.publishDate}>By {frontmatter.author} on {frontmatter.publishDate}</p>
    <slot />
  </article>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const metaElement = document.querySelector('.meta[data-publish-date]');
    if (metaElement) {
      const rawDate = metaElement.getAttribute('data-publish-date');
      const date = new Date(rawDate);
      const formattedDate = new Intl.DateTimeFormat(navigator.language, {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      }).format(date);
      metaElement.textContent = metaElement.textContent.replace(rawDate, formattedDate);
    }
  });
</script>
